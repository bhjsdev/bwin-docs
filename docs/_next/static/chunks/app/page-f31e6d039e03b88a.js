(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1801:(t,e,i)=>{Promise.resolve().then(i.bind(i,643))},643:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>H});var n=i(5155),s=i(2115),h=i(7650),o=Object.defineProperty,r=(t,e,i)=>e in t?o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,l=(t,e,i)=>r(t,"symbol"!=typeof e?e+"":e,i);function a(t=2,e=3){if(t<0||e<0)throw Error("Parameters must be non-negative numbers");let i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="0123456789",s="";for(let e=0;e<t;e++){let t=Math.floor(Math.random()*i.length);s+=i[t]}s+="-";for(let t=0;t<e;t++){let t=Math.floor(Math.random()*n.length);s+=n[t]}return s}function d(t,e){for(;e.firstChild;)t.append(e.firstChild)}function c(t){if("number"==typeof t&&!isNaN(t))return t;if("string"==typeof t){let e=t.trim();if(e.endsWith("%")){let t=e.slice(0,-1);if(!t)return NaN;let i=Number(t);return isNaN(i)?NaN:i/100}if(e.endsWith("px")){let t=e.slice(0,-2);if(!t)return NaN;let i=Number(t);return isNaN(i)?NaN:i}return Number(e)}return NaN}function p(t){if(null==t||""===t)return null;if("string"==typeof t)try{let e=function(t){let e=document.createElement("template");return e.innerHTML=t.trim(),e.content}(t);return 1===e.childNodes.length?e.firstChild:e}catch{return document.createTextNode(t)}return t instanceof Node?t:document.createTextNode(String(t))}function u(t){let e=parseFloat(t.style.left)||0;return{left:e,top:parseFloat(t.style.top)||0,width:parseFloat(t.style.width)||0,height:parseFloat(t.style.height)||0}}let g={Top:"top",Right:"right",Bottom:"bottom",Left:"left",Center:"center",Root:"root",Unknown:"unknown",Outside:"outside"},f={left:0,top:0,width:150,height:150,minWidth:100,minHeight:100};class m{constructor({left:t=f.left,top:e=f.top,width:i=f.width,height:n=f.height,minWidth:s=f.minWidth,minHeight:h=f.minHeight,domNode:o=null,store:r={},position:l,id:d}=f){if(this.id=d??a(),!l)throw Error("[bwin] Sash position is required");this.position=l,this.domNode=o,this._top=e,this._left=t,this._width=i,this._height=n,this.children=[],this.minWidth=s,this.minHeight=h,this.store=r}walk(t){this.children.forEach(e=>e.walk(t)),t(this)}isLeaf(){return 0===this.children.length}isSplit(){return this.children.length>0}isLeftRightSplit(){return this.children.some(t=>t.position===g.Left||t.position===g.Right)}isTopBottomSplit(){return this.children.some(t=>t.position===g.Top||t.position===g.Bottom)}get leftChild(){return this.children.find(t=>t.position===g.Left)}get rightChild(){return this.children.find(t=>t.position===g.Right)}get topChild(){return this.children.find(t=>t.position===g.Top)}get bottomChild(){return this.children.find(t=>t.position===g.Bottom)}getChildren(){let t=null,e=null,i=null,n=null;for(let s of this.children)s.position===g.Left?t=s:s.position===g.Right?e=s:s.position===g.Top?i=s:s.position===g.Bottom&&(n=s);return[i,e,n,t]}getAllLeafDescendants(){let t=[];return this.walk(e=>{0===e.children.length&&t.push(e)}),t}calcMinWidth(){if(this.isLeaf())return this.minWidth;let[t,e,i,n]=this.getChildren();if(n&&e){let t=n.calcMinWidth()+e.calcMinWidth();return Math.max(this.minWidth,t)}if(t&&i){let e=Math.max(t.calcMinWidth(),i.calcMinWidth());return Math.max(this.minWidth,e)}}calcMinHeight(){if(this.isLeaf())return this.minHeight;let[t,e,i,n]=this.getChildren();if(n&&e){let t=Math.max(n.calcMinHeight(),e.calcMinHeight());return Math.max(this.minHeight,t)}if(t&&i){let e=t.calcMinHeight()+i.calcMinHeight();return Math.max(this.minHeight,e)}}getById(t){if(this.id===t)return this;for(let e of this.children){let i=e.getById(t);if(i)return i}return null}getAllIds(){let t=[this.id];for(let e of this.children)t.push(...e.getAllIds());return t}addChild(t){if(this.children.length>=2)throw Error("[bwin] Maximum 2 children allowed");this.children.push(t)}getDescendantParentById(t){for(let e of this.children){if(e.id===t)return this;let i=e.getDescendantParentById(t);if(i)return i}return null}getChildSiblingById(t){return this.children.find(e=>e.id!==t)}get top(){return this._top}set top(t){let e=t-this._top;this._top=t;let[i,n,s,h]=this.getChildren();i&&s&&(i.top+=e,s.top+=e),h&&n&&(h.top+=e,n.top+=e)}get left(){return this._left}set left(t){let e=t-this._left;this._left=t;let[i,n,s,h]=this.getChildren();h&&n&&(h.left+=e,n.left+=e),i&&s&&(i.left+=e,s.left+=e)}get width(){return this._width}set width(t){let e=t-this._width;this._width=t;let[i,n,s,h]=this.getChildren();if(h&&n){let t=h.width+n.width,i=e*(h.width/t),s=t+e,o=h.width+i,r=s-o,l=n.left+i,a=h.calcMinWidth(),d=n.calcMinWidth();o<a&&r>d?(r=s-(o=a),l=h.left+o):r<d&&o>a&&(o=s-(r=d),l=h.left+o),h.width=o,n.width=r,n.left=l}i&&s&&(i.width+=e,s.width+=e)}get height(){return this._height}set height(t){let e=t-this._height;this._height=t;let[i,n,s,h]=this.getChildren();if(i&&s){let t=i.height+s.height,n=e*(i.height/t),h=t+e,o=i.height+n,r=h-o,l=s.top+n,a=i.calcMinHeight(),d=s.calcMinHeight();o<a&&r>d?(r=h-(o=a),l=i.top+o):r<d&&o>a&&(o=h-(r=d),l=i.top+o),i.height=o,s.height=r,s.top=l}h&&n&&(h.height+=e,n.height+=e)}}let w={size:"50%",position:g.Left};class b{constructor({parentRect:t,children:e,siblingConfigNode:i,id:n,minWidth:s,minHeight:h,position:o,size:r,...a}){l(this,"left"),l(this,"top"),l(this,"width"),l(this,"height"),this.parentRect=t,this.children=e,this.siblingConfigNode=i,this.id=n,this.minWidth=s,this.minHeight=h,this.position=this.getPosition(o),this.size=this.getSize(r),this.nonCoreData=a,this.setBounds()}getPosition(t){if(!this.siblingConfigNode)return t;let e=function(t){switch(t){case g.Top:return g.Bottom;case g.Right:return g.Left;case g.Bottom:return g.Top;case g.Left:return g.Right;default:throw Error(`[bwin] Invalid position: ${t}`)}}(this.siblingConfigNode.position);if(!t)return e;if(t!==e)throw Error("[bwin] Sibling position and current position are not opposite");return t}getSize(t){if(!this.siblingConfigNode)return c(t);if(!t){if(this.siblingConfigNode.size<1)return 1-this.siblingConfigNode.size;if(this.siblingConfigNode.position===g.Left||this.siblingConfigNode.position===g.Right)return this.parentRect.width-this.siblingConfigNode.width;if(this.siblingConfigNode.position===g.Top||this.siblingConfigNode.position===g.Bottom)return this.parentRect.height-this.siblingConfigNode.height}let e=c(t);if(e<1){if(e+this.siblingConfigNode.size!==1)throw Error("[bwin] Sum of sibling sizes is not equal to 1")}else{if((this.position===g.Left||this.position===g.Right)&&e+this.siblingConfigNode.size!==this.parentRect.width)throw Error("[bwin] Sum of sibling sizes is not equal to parent width");if((this.position===g.Top||this.position===g.Bottom)&&e+this.siblingConfigNode.size!==this.parentRect.height)throw Error("[bwin] Sum of sibling sizes is not equal to parent height")}return e}setBounds(){if(this.position===g.Root)this.left=0,this.top=0,this.width=this.parentRect.width,this.height=this.parentRect.height;else if(this.position===g.Left){let t=this.size<1?this.parentRect.width*this.size:this.size;this.left=this.parentRect.left,this.top=this.parentRect.top,this.width=t,this.height=this.parentRect.height}else if(this.position===g.Right){let t=this.size<1?this.parentRect.width*this.size:this.size;this.left=this.parentRect.left+this.parentRect.width-t,this.top=this.parentRect.top,this.width=t,this.height=this.parentRect.height}else if(this.position===g.Top){let t=this.size<1?this.parentRect.height*this.size:this.size;this.left=this.parentRect.left,this.top=this.parentRect.top,this.width=this.parentRect.width,this.height=t}else if(this.position===g.Bottom){let t=this.size<1?this.parentRect.height*this.size:this.size;this.left=this.parentRect.left,this.top=this.parentRect.top+this.parentRect.height-t,this.width=this.parentRect.width,this.height=t}}createSash(){return new m({left:this.left,top:this.top,width:this.width,height:this.height,position:this.position,id:this.id,minWidth:this.minWidth,minHeight:this.minHeight,store:this.nonCoreData})}normConfig(t){if(null!==t&&"object"==typeof t&&!Array.isArray(t)&&Object.getPrototypeOf(t)===Object.prototype)return t;if(Array.isArray(t))return{children:t};if("string"==typeof t||"number"==typeof t){let e=c(t);if(isNaN(e))throw Error(`[bwin] Invalid size value: ${e}`);return{size:t}}if(null==t)return{};throw Error(`[bwin] Invalid config value: ${t}`)}createPrimaryConfigNode({size:t,position:e,children:i,id:n,minWidth:s,minHeight:h,...o}){return new b({parentRect:this,size:t??w.size,position:e??w.position,children:i,id:n,minWidth:s,minHeight:h,...o})}createSecondaryConfigNode({size:t,position:e,children:i,id:n,minWidth:s,minHeight:h,...o},r){return new b({parentRect:this,size:t,position:e,children:i,siblingConfigNode:r,id:n,minWidth:s,minHeight:h,...o})}buildSashTree(){let t,e;let i=this.createSash();if(!Array.isArray(this.children)||0===this.children.length)return i;let n=this.normConfig(this.children[0]),s=this.normConfig(this.children.at(1));return n.size||n.position||!s?(t=this.createPrimaryConfigNode(n),e=this.createSecondaryConfigNode(s,t)):(s.position||(s.position=g.Right),t=this.createPrimaryConfigNode(s),e=this.createSecondaryConfigNode(n,t)),t&&e&&(i.children.push(t.buildSashTree()),i.children.push(e.buildSashTree())),i}}let E={width:333,height:333},y={fitContainer:!1};class v extends b{constructor({id:t,children:e,width:i=E.width,height:n=E.height,fitContainer:s=y.fitContainer,...h}={...E,...y}){super({id:t,children:e,size:NaN,position:g.Root,parentRect:{width:i,height:n},...h}),this.fitContainer=s}}class N extends m{constructor(t=f){super({...t,position:g.Root}),Object.assign(this,y)}}function z(t){let e=document.createElement("bw-pane");return e.style.top=`${t.top}px`,e.style.left=`${t.left}px`,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.setAttribute("sash-id",t.id),e.setAttribute("position",t.position),e}function C(t){let e=document.createElement("pre");e.style.fontSize="10px";let i=`
${t.getAttribute("sash-id")}
${t.getAttribute("position")}
top: ${t.style.top}
left: ${t.style.left}
width: ${t.style.width}
height: ${t.style.height}
`;return e.innerHTML=i.trim(),e}class S{constructor(t){l(this,"windowElement",null),l(this,"containerElement",null),l(this,"debug",!1);let e=null;t instanceof N?(e=t,this.rootSash=t):(e=new v(t),this.rootSash=e.buildSashTree()),this.fitContainer=e.fitContainer}frame(t){this.containerElement=t,this.windowElement=this.createWindow(),this.glaze(),this.containerElement.append(this.windowElement)}enableFeatures(){this.enableResize(),this.enableDrop(),this.fitContainer&&this.enableFitContainer()}mount(t){this.frame(t),this.enableFeatures()}static assemble(...t){t.forEach(t=>{!function(t,e){for(let i in e){if(Object.hasOwn(t,i))throw Error(`Key "${i}" already exists in target object`);t[i]=e[i]}}(this.prototype,t)})}}function A(t){if("BW-PANE"===t.tagName)return t.getAttribute("sash-id");let e=t.closest("bw-pane");if(!e)throw Error("[bwin] Pane element not found");return e.getAttribute("sash-id")}S.assemble({createWindow(){let t=document.createElement("bw-window");return t.style.width=`${this.rootSash.width}px`,t.style.height=`${this.rootSash.height}px`,t.setAttribute("root-sash-id",this.rootSash.id),t},glaze(){this.rootSash.walk(t=>{let e=null;t.children.length>0?(e=this.createMuntin(t),this.onMuntinCreate(e,t),this.windowElement.append(e)):(e=this.createPane(t),this.onPaneCreate(e,t),this.windowElement.prepend(e)),t.domNode=e})},update(){this.windowElement.style.width=`${this.rootSash.width}px`,this.windowElement.style.height=`${this.rootSash.height}px`;let t=this.rootSash.getAllIds(),e=[];this.windowElement.querySelectorAll("[sash-id]").forEach(i=>{let n=i.getAttribute("sash-id");e.push(n),t.includes(n)||i.remove()}),this.rootSash.walk(t=>{t.children.length>0?e.includes(t.id)?(this.updateMuntin(t),this.onMuntinUpdate(t.domNode,t)):(t.domNode=this.createMuntin(t),this.windowElement.append(t.domNode)):e.includes(t.id)?(this.updatePane(t),this.onPaneUpdate(t.domNode,t)):(t.domNode||(t.domNode=this.createPane(t)),this.windowElement.prepend(t.domNode))})}},{muntinSize:4,createMuntin(t){let e=document.createElement("bw-muntin"),i=t.leftChild,n=t.topChild;return i?(e.style.width=`${this.muntinSize}px`,e.style.height=`${t.height}px`,e.style.top=`${t.top}px`,e.style.left=`${t.left+i.width-this.muntinSize/2}px`,e.setAttribute("vertical","")):n&&(e.style.width=`${t.width}px`,e.style.height=`${this.muntinSize}px`,e.style.top=`${t.top+n.height-this.muntinSize/2}px`,e.style.left=`${t.left}px`,e.setAttribute("horizontal","")),e.setAttribute("sash-id",t.id),!1===t.store.resizable&&e.setAttribute("resizable","false"),e},onMuntinCreate(t,e){},updateMuntin(t){let e=t.domNode,i=t.leftChild,n=t.topChild;i?(e.style.height=`${t.height}px`,e.style.top=`${t.top}px`,e.style.left=`${t.left+i.width-this.muntinSize/2}px`):n&&(e.style.width=`${t.width}px`,e.style.top=`${t.top+n.height-this.muntinSize/2}px`,e.style.left=`${t.left}px`)},onMuntinUpdate(t,e){}},{createPane(t){let e=z(t);return!1===t.store.droppable&&e.setAttribute("can-drop","false"),e},onPaneCreate(t,e){e.store.content&&t.append(p(e.store.content)),this!=null&&this.debug&&(t.style.backgroundColor=function(t=.7,e=128){let i=256-e,n=Math.floor(Math.random()*i+e),s=Math.floor(Math.random()*i+e),h=Math.floor(Math.random()*i+e),o=Math.max(.5,Math.random()*t);return`rgba(${n}, ${s}, ${h}, ${o})`}(),t.innerHTML="",t.append(C(t)))},updatePane:t=>(function(t){let e=t.domNode;return e.style.top=`${t.top}px`,e.style.left=`${t.left}px`,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.setAttribute("position",t.position),e})(t),onPaneUpdate(t,e){this!=null&&this.debug&&(t.innerHTML="",t.append(C(t)))},addPane(t,{position:e,size:i}){if(!e)throw Error("[bwin] Position is required when adding pane");let n=this.rootSash.getById(t);if(!n)throw Error("[bwin] Parent sash not found when adding pane");let s=function(t,{position:e,size:i,minWidth:n,minHeight:s}){return e===g.Left?function(t,{size:e}){let i=c(e),n=t.width/2;i&&(n=i<1?t.width*i:i);let s=new m({top:t.top,left:t.left,width:n,height:t.height,position:g.Left}),h=new m({top:t.top,left:t.left+s.width,width:t.width-n,height:t.height,position:g.Right}),o=z(h);return h.domNode=o,d(o,t.domNode),t.addChild(s),t.addChild(h),s}(t,{size:i}):e===g.Right?function(t,{size:e}){let i=c(e),n=t.width/2;i&&(n=i<1?t.width*i:i);let s=new m({left:t.left,top:t.top,width:t.width-n,height:t.height,position:g.Left}),h=new m({left:t.left+s.width,top:t.top,width:n,height:t.height,position:g.Right}),o=z(s);return s.domNode=o,d(o,t.domNode),t.addChild(s),t.addChild(h),h}(t,{size:i}):e===g.Top?function(t,{size:e}){let i=c(e),n=t.height/2;i&&(n=i<1?t.height*i:i);let s=new m({left:t.left,top:t.top,width:t.width,height:n,position:g.Top}),h=new m({left:t.left,top:t.top+s.height,width:t.width,height:t.height-n,position:g.Bottom}),o=z(h);return h.domNode=o,d(o,t.domNode),t.addChild(s),t.addChild(h),s}(t,{size:i}):e===g.Bottom?function(t,{size:e}){let i=c(e),n=t.height/2;i&&(n=i<1?t.height*i:i);let s=new m({top:t.top,left:t.left,width:t.width,height:t.height-n,position:g.Top}),h=new m({top:t.top+s.height,left:t.left,width:t.width,height:n,position:g.Bottom}),o=z(s);return s.domNode=o,d(o,t.domNode),t.addChild(s),t.addChild(h),h}(t,{size:i}):void 0}(n,{position:e,size:i});return n.id=a(),this.update(),s},removePane(t){let e=this.rootSash.getDescendantParentById(t);if(!e)throw Error("[bwin] Parent sash not found when removing pane");let i=e.getChildSiblingById(t);e.id=a(),0===i.children.length?(e.domNode=i.domNode,e.domNode.setAttribute("sash-id",e.id),e.children=[]):(e.children=i.children,i.position===g.Left?i.width=e.width:i.position===g.Right?(i.width=e.width,i.left=e.left):i.position===g.Top?i.height=e.height:i.position===g.Bottom&&(i.height=e.height,i.top=e.top)),this.update()}},{fitContainer:!1,fit(){this.rootSash.width=this.containerElement.clientWidth,this.rootSash.height=this.containerElement.clientHeight,this.update()},enableFitContainer(){new ResizeObserver(t=>{for(let e of t)e.target===this.containerElement&&this.fitContainer&&this.fit()}).observe(this.containerElement)}},{activeDropPaneEl:null,onPaneDrop(t,e){},enableDrop(){this.windowElement.addEventListener("dragover",t=>{t.preventDefault();let e=t.target.matches("bw-pane")?t.target:t.target.closest("bw-pane");if(!e||(e!==this.activeDropPaneEl&&(this.activeDropPaneEl&&this.activeDropPaneEl.removeAttribute("drop-area"),this.activeDropPaneEl=e),"false"===e.getAttribute("can-drop")))return;let i=function(t,{clientX:e,clientY:i}){let n=t.getBoundingClientRect(),{width:s,height:h}=n,o=e-n.left,r=i-n.top;if(o<0||o>s||r<0||r>h)return g.Outside;let l=function({width:t,height:e,x:i}){return e/t*i}({width:s,height:h,x:o}),a=function({width:t,height:e,x:i}){return e-e/t*i}({width:s,height:h,x:o}),d=function({width:t,height:e,y:i}){return t/e*i}({width:s,height:h,y:r}),c=function({width:t,height:e,y:i}){return t-t/e*i}({width:s,height:h,y:r});return o<.35*s&&r>l&&r<a?g.Left:o>.65*s&&r<l&&r>a?g.Right:r<.35*h&&o>d&&o<c?g.Top:r>.65*h&&o<d&&o>c?g.Bottom:o>.35*s&&o<.65*s&&r>.35*h&&r<.65*h?g.Center:g.Unknown}(e,t);e.setAttribute("drop-area",i)}),this.windowElement.addEventListener("dragleave",t=>{t.currentTarget.contains(t.relatedTarget)&&t.currentTarget!==t.relatedTarget||this.activeDropPaneEl&&(this.activeDropPaneEl.removeAttribute("drop-area"),this.activeDropPaneEl=null)}),this.windowElement.addEventListener("drop",t=>{if(!this.activeDropPaneEl||"false"===this.activeDropPaneEl.getAttribute("can-drop"))return;let e=this.activeDropPaneEl.getAttribute("sash-id"),i=this.rootSash.getById(e);this.onPaneDrop(t,i),"function"==typeof i.store.onDrop&&i.store.onDrop(t,i),this.activeDropPaneEl.removeAttribute("drop-area"),this.activeDropPaneEl=null})}},{activeMuntinSash:null,isResizeStarted:!1,isDropStarted:!1,lastX:0,lastY:0,applyResizeStyles(){this.activeMuntinSash.domNode.hasAttribute("vertical")?document.body.classList.add("body--bw-resize-x"):this.activeMuntinSash.domNode.hasAttribute("horizontal")&&document.body.classList.add("body--bw-resize-y")},revertResizeStyles(){document.body.classList.remove("body--bw-resize-x"),document.body.classList.remove("body--bw-resize-y")},enableResize(){document.addEventListener("mousedown",t=>{if("BW-MUNTIN"!==t.target.tagName||"false"===t.target.getAttribute("resizable"))return;let e=t.target.getAttribute("sash-id");this.activeMuntinSash=this.rootSash.getById(e),this.activeMuntinSash&&(this.isResizeStarted=!0,this.lastX=t.pageX,this.lastY=t.pageY,this.applyResizeStyles())}),document.addEventListener("mousemove",t=>{if(!this.isResizeStarted||!this.activeMuntinSash)return;let[e,i,n,s]=this.activeMuntinSash.getChildren(),h=this.activeMuntinSash.isLeftRightSplit(),o=this.activeMuntinSash.isTopBottomSplit();if(h&&s&&i){let e=t.pageX-this.lastX,n=s.width+e,h=i.width-e;if(n<=s.calcMinWidth()||h<=i.calcMinWidth())return;s.width=n,i.width=h,i.left=i.left+e,this.update(),this.lastX=t.pageX}else if(o&&e&&n){let i=t.pageY-this.lastY,s=e.height+i,h=n.height-i;if(s<=e.calcMinHeight()||h<=n.calcMinHeight())return;e.height=s,n.height=h,n.top=n.top+i,this.update(),this.lastY=t.pageY}}),document.addEventListener("mouseup",()=>{this.isResizeStarted=!1,this.activeMuntinSash=null,this.revertResizeStyles()})}});let M=[{label:"",className:"bw-glass-action--minimize",onClick:(t,e)=>{let i=e.sillElement;if(!i)throw Error("[bwin] Sill element not found when minimizing");let n=p('<button class="bw-minimized-glass" />');i.append(n);let s=t.target.closest("bw-pane"),h=t.target.closest("bw-glass"),o=s.getAttribute("sash-id"),r=s.getAttribute("position");n.bwGlassElement=h,n.bwOriginalPosition=r,n.bwOriginalBoundingRect=u(s),e.removePane(o)}},{label:"",className:"bw-glass-action--maximize",onClick:t=>{let e=t.target.closest("bw-pane");e.hasAttribute("maximized")?(e.removeAttribute("maximized"),e.style.left=`${e.bwOriginalBoundingRect.left}px`,e.style.top=`${e.bwOriginalBoundingRect.top}px`,e.style.width=`${e.bwOriginalBoundingRect.width}px`,e.style.height=`${e.bwOriginalBoundingRect.height}px`):(e.setAttribute("maximized",""),e.bwOriginalBoundingRect=u(e),e.style.left="0",e.style.top="0",e.style.width="100%",e.style.height="100%")}},{label:"",className:"bw-glass-action--close",onClick:(t,e)=>{let i=A(t.target);e.removePane(i)}}],R={title:null,content:null,tabs:[],actions:void 0,draggable:!0};class x{constructor({title:t=R.title,content:e=R.content,tabs:i=R.tabs,actions:n=R.actions,draggable:s=R.draggable,sash:h,binaryWindow:o}){l(this,"domNode"),this.title=t,this.content=e,this.tabs=i,this.actions=n,this.sash=h,this.draggable=s,this.binaryWindow=o,this.build()}build(){let t=document.createElement("bw-glass-header");if(Array.isArray(this.tabs)&&this.tabs.length>0)t.append(this.createTabs());else if(this.title){let e=document.createElement("bw-glass-title");e.append(p(this.title)),t.append(e)}t.setAttribute("can-drag",this.draggable),t.append(this.createActions());let e=document.createElement("bw-glass-content"),i=p(this.content);i&&e.append(i),this.domNode=document.createElement("bw-glass"),this.domNode.append(t,e)}createTabs(){let t=document.createElement("bw-glass-tab-container");for(let e of this.tabs){let i=(null==e?void 0:e.label)??e,n=p(`<button class="bw-glass-tab">${i}</button>`);t.append(n)}return t}createActions(){let t=document.createElement("bw-glass-action-container");for(let e of void 0===this.actions?M:Array.isArray(this.actions)?this.actions:[]){let i=(null==e?void 0:e.label)??e,n=e.className?`bw-glass-action ${e.className}`:"bw-glass-action",s=p(`<button class="${n}">${i}</button>`);"function"==typeof e.onClick&&s.addEventListener("click",t=>{e.onClick(t,this.binaryWindow)}),t.append(s)}return t}get contentElement(){return this.domNode.querySelector("bw-glass-content")}get headerElement(){return this.domNode.querySelector("bw-glass-header")}}class P extends S{constructor(){super(...arguments),l(this,"sillElement",null)}frame(){super.frame(...arguments);let t=p("<bw-sill />");this.windowElement.append(t),this.sillElement=t}enableFeatures(){super.enableFeatures(),this.enableDrag(),this.enableActions()}onPaneCreate(t,e){let i=new x({...e.store,sash:e,binaryWindow:this});t.innerHTML="",t.append(i.domNode),this.debug&&i.contentElement.prepend(`${e.id}`)}onPaneUpdate(){}addPane(t,e){let{position:i,size:n,...s}=e,h=super.addPane(t,{position:i,size:n}),o=new x({...s,sash:h,binaryWindow:this});return h.domNode.append(o.domNode),h}}function D({sash:t}){var e;let i,n,h,o,r,l;let a=(0,s.useRef)(),d=t.leftChild,c=t.topChild;return d?(i=4,n=t.height-4,h=t.top+2,o=t.left+d.width-2,r=!0):c&&(i=t.width-4,n=4,h=t.top+c.height-2,o=t.left+2,l=!0),(0,s.useEffect)(()=>{t.domNode=a.current},[]),s.createElement("bw-muntin",{"sash-id":t.id,style:{width:i,height:n,top:h,left:o},vertical:r,horizontal:l,resizable:(null==(e=t.store)?void 0:e.resizable)===!1?"false":"true",ref:a})}function $({sash:t,bwin:e}){var i,n,h,o,r;let l=(0,s.useRef)(),{left:a,top:d,width:c,height:p,id:u,position:g}=t;(0,s.useEffect)(()=>{t.domNode=l.current},[]);let f=(null==(i=t.store)?void 0:i.actions)===void 0?M:Array.isArray(t.store.actions)?t.store.actions:[];return s.createElement("bw-pane",{"sash-id":u,position:g,style:{left:a,top:d,width:c,height:p},"can-drop":(null==(n=t.store)?void 0:n.droppable)===!1?"false":"true",ref:l},s.createElement("bw-glass",null,s.createElement("bw-glass-header",{"can-drag":(null==(h=t.store)?void 0:h.draggable)===!1?"false":"true"},(null==(o=t.store)?void 0:o.title)&&s.createElement("bw-glass-title",null,t.store.title),f.length>0&&s.createElement("bw-glass-action-container",null,f.map((t,i)=>{let n=t.className?`bw-glass-action ${t.className}`:"bw-glass-action";return s.createElement("button",{className:n,key:i,onClick:i=>t.onClick(i,e)},t.label)}))),s.createElement("bw-glass-content",null,null==(r=t.store)?void 0:r.content)))}P.assemble({activeDragGlassEl:null,activeDragGlassPaneCanDrop:!1,onPaneDrop(t,e){if(!this.activeDragGlassEl)return;let i=this.activeDropPaneEl.getAttribute("drop-area");if("center"===i){let t=this.activeDragGlassEl.closest("bw-pane"),e="false"!==this.activeDropPaneEl.getAttribute("can-drop");(function(t,e){let i=document.createElement("div");d(i,t),d(t,e),d(e,i)})(t,this.activeDropPaneEl),t.setAttribute("can-drop",e);return}{let t=A(this.activeDragGlassEl);this.addPane(e.id,{position:i}).domNode.append(this.activeDragGlassEl),this.removePane(t)}},enableDrag(){document.addEventListener("mousedown",t=>{if(0!==t.button||!t.target.matches("bw-glass-header"))return;if("false"===t.target.getAttribute("can-drag")){t.preventDefault();return}let e=t.target.closest("bw-glass");e.setAttribute("draggable",!0),this.activeDragGlassEl=e}),document.addEventListener("mouseup",()=>{this.activeDragGlassEl&&(this.activeDragGlassEl.removeAttribute("draggable"),this.activeDragGlassEl=null)}),this.windowElement.addEventListener("dragstart",t=>{if(!(t.target instanceof HTMLElement)||!t.target.matches("bw-glass")||!this.activeDragGlassEl)return;t.dataTransfer.effectAllowed="move";let e=this.activeDragGlassEl.closest("bw-pane");this.activeDragGlassPaneCanDrop="false"!==e.getAttribute("can-drop"),e.setAttribute("can-drop",!1)}),this.windowElement.addEventListener("dragend",()=>{this.activeDragGlassEl&&(this.activeDragGlassEl.removeAttribute("draggable"),this.activeDragGlassEl.closest("bw-pane").setAttribute("can-drop",this.activeDragGlassPaneCanDrop),this.activeDragGlassEl=null)})}},{trimMuntin(t){t.hasAttribute("vertical")?(t.style.top=`${parseFloat(t.style.top)+this.muntinSize/2}px`,t.style.height=`${parseFloat(t.style.height)-this.muntinSize}px`):t.hasAttribute("horizontal")&&(t.style.left=`${parseFloat(t.style.left)+this.muntinSize/2}px`,t.style.width=`${parseFloat(t.style.width)-this.muntinSize}px`)},onMuntinCreate(t){this.trimMuntin(t)},onMuntinUpdate(t){this.trimMuntin(t)}},{enableActions(){this.handleMinimizedGlassClick(),this.observeActionButtons()},restoreGlass(t){let e=t.bwOriginalBoundingRect,i=0,n=null;if(this.windowElement.querySelectorAll("bw-pane").forEach(t=>{let s=function(t,e){let i=t.left+t.width,n=t.top+t.height,s=e.left+e.width,h=e.top+e.height;if(t.left>=s||e.left>=i||t.top>=h||e.top>=n)return null;let o=Math.max(t.left,e.left),r=Math.max(t.top,e.top);return{left:o,top:r,width:Math.min(i,s)-o,height:Math.min(n,h)-r}}(e,u(t));if(s){let e=s.width*s.height;e>i&&(i=e,n=t)}}),n){let i=t.bwOriginalPosition,s=u(n),h=0;if(i===g.Left||i===g.Right)h=e.width>=s.width?s.width/2:e.width;else if(i===g.Top||i===g.Bottom)h=e.height>=s.height?s.height/2:e.height;else throw Error("[bwin] Invalid position when restoring glass");this.addPane(n.getAttribute("sash-id"),{position:i,size:h}).domNode.append(t.bwGlassElement)}},handleMinimizedGlassClick(){this.sillElement.addEventListener("click",t=>{if(!t.target.matches(".bw-minimized-glass"))return;let e=t.target;this.restoreGlass(e),e.remove()})},updateDisabledStateOfActionButtons(){this.updateDisabledState(".bw-glass-action--close"),this.updateDisabledState(".bw-glass-action--minimize"),this.updateDisabledState(".bw-glass-action--maximize")},updateDisabledState(t){if(1===this.windowElement.querySelectorAll("bw-pane").length){let e=this.windowElement.querySelector(t);e&&e.setAttribute("disabled","")}else this.windowElement.querySelectorAll(t).forEach(t=>{t.removeAttribute("disabled")})},observeActionButtons(){this.updateDisabledStateOfActionButtons(),new MutationObserver(t=>{t.forEach(t=>{"childList"===t.type&&this.updateDisabledStateOfActionButtons()})}).observe(this.windowElement,{childList:!0})}});let L=(0,s.forwardRef)((t,e)=>{let i=(0,s.useRef)(),n=(0,s.useRef)(),[o,r]=(0,s.useState)(),{panes:l,...a}=t,d=new P({...a,children:l}),c=[],p=[];d.rootSash.walk(t=>{t.children.length>0?c.push(t):p.push(t)}),(0,s.useEffect)(()=>{let t=i.current;null!=t&&t.parentElement&&(d.windowElement=t,d.containerElement=t.parentElement,d.sillElement=n.current,d.enableFeatures())},[]),(0,s.useImperativeHandle)(e,()=>({fit:d.fit.bind(d),removePane:d.removePane.bind(d),addPane:f}),[]);let u=s.createElement("bw-window",{"root-sash-id":d.rootSash.id,style:{width:d.rootSash.width,height:d.rootSash.height},ref:i},p.map(t=>s.createElement($,{key:t.id,sash:t,bwin:d})),c.map(t=>s.createElement(D,{key:t.id,sash:t})),s.createElement("bw-sill",{ref:n})),g=(0,s.useMemo)(()=>u,[]);function f(t,e){let{content:i,...n}=e,s=d.addPane(t,n),h=document.querySelector(`bw-pane[sash-id="${s.id}"] bw-glass-content`);r(t=>[...t||[],{node:i,container:h}])}return s.createElement(s.Fragment,null,g,null==o?void 0:o.map(t=>(0,h.createPortal)(t.node,t.container)))});function B(){let t=(0,n.jsx)(L,{fitContainer:!0,panes:[{position:"left",size:"30%",title:"Title",content:(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:["Package version: ","0.3.0"]}),(0,n.jsxs)("li",{children:["React version: ",s.version]})]})},{position:"right",children:[{position:"top",size:"30%",title:(0,n.jsx)("i",{children:"No action buttons"}),actions:null},{position:"bottom",size:"70%",children:[{position:"left",size:"50%",draggable:!1,content:"Drag disabled"},{position:"right",size:"50%",content:" Drop disabled",droppable:!1}]}]}]});return(0,n.jsx)("div",{style:{width:"90%",height:444},children:t})}i(7827);var T=i(8334),W=i.n(T);function H(){let[t,e]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{e(!0)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:W().heading,children:"Binary Window Documentation"}),t&&(0,n.jsx)(B,{})]})}},7827:()=>{},8334:t=>{t.exports={heading:"page_heading__ZPgh_"}}},t=>{var e=e=>t(t.s=e);t.O(0,[66,441,517,358],()=>e(1801)),_N_E=t.O()}]);